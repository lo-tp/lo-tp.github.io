<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Every Day in Life Is a First Time">
<meta property="og:type" content="website">
<meta property="og:title" content="Lotp's Blog">
<meta property="og:url" content="http://blog.lotp.xyz/index.html">
<meta property="og:site_name" content="Lotp's Blog">
<meta property="og:description" content="Every Day in Life Is a First Time">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lotp's Blog">
<meta name="twitter:description" content="Every Day in Life Is a First Time">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://blog.lotp.xyz/"/>

  <title> Lotp's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Lotp's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/05/My-First-Try-at-TDD-How-I-Test-Asynchronous-Code-in-Mocha-With-async-await-Syntax/" itemprop="url">
                  My First Try at TDD: How I Test Asynchronous Code in Mocha With async/await Syntax
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-01-05T13:56:47+08:00" content="2017-01-05">
              2017-01-05
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/05/My-First-Try-at-TDD-How-I-Test-Asynchronous-Code-in-Mocha-With-async-await-Syntax/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/05/My-First-Try-at-TDD-How-I-Test-Asynchronous-Code-in-Mocha-With-async-await-Syntax/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Every body knows that writing unit test is very important during programming.<br>However, it is not an easy job, especially when it comes to <code>asynchronous code</code>.</p>
<p>Initially, callback has to be used to test <code>asynchronous code</code>:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'User Profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  it(<span class="string">'can get user profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</div><div class="line">    getProfile(<span class="string">'bulkan'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span>(err) &#123;</div><div class="line">        done(err)</div><div class="line">      &#125;</div><div class="line">      assert.equal(result.userName, <span class="string">'bulkan'</span>);</div><div class="line">      done();</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>This kind of test could easily turned out to be a <a href="http://callbackhell.com/" target="_blank" rel="external">callback hell</a> when the logic become complex.<br>Thank god, with the advent of <code>promise</code>, testing <code>asynchronous code</code> is not that much depressing now.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'User Profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  it(<span class="string">'can get user profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</div><div class="line">    getProfile(<span class="string">'bulkan'</span>)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</div><div class="line">      assert.equal(result.userName, <span class="string">'bulkan'</span>);</div><div class="line">      done();</div><div class="line">    &#125;)</div><div class="line">    .catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">      done(err);</div><div class="line">    &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Actually manually calling <code>done</code> is not necessary any more in newer version of mocha, as mocha takes care of promise itself pretty well.<br>So the above code can be written as:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'User Profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  it(<span class="string">'can get user profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> getProfile(<span class="string">'bulkan'</span>)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</div><div class="line">      assert.equal(result.userName, <span class="string">'bulkan'</span>);</div><div class="line">    &#125;)</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>Now this looks good.<br>However, we won’t be satisfied with this, will we?<br>Take a look at how this code could be further improved with <code>async/await</code>.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'User Profile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  it(<span class="string">'can get user profile'</span>, <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getProfile(<span class="string">'bulkan'</span>);</div><div class="line">    assert.equal(result.userName, <span class="string">'bulkan'</span>);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>In the above snippet, we are taking advantage of of one lovely feature of Async functions:</p>
<blockquote>
<p>Async functions always return a promise, no matter whether or not await is invoked.<br>The promise, returned by async function, would resolve with whatever the async function returns, or rejects with whatever the async function throws.<br>With the <code>async/await</code>, testing asynchronous code is nearly identical to testing synchronous code.<br>Cheer!!!</p>
<hr>
<h5 id="Caveat"><a href="#Caveat" class="headerlink" title="Caveat"></a>Caveat</h5><p>Every thing comes at a price.<br>Although it is very trendy now, we still need a transpiler like <code>bable</code> to use <code>async/await</code>.<br>What a pity.</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/13/LeetCode-417-AC-Pacific-Atlantic-Water-Flow/" itemprop="url">
                  [LeetCode 417, AC] Pacific Atlantic Water Flow
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-13T14:22:33+08:00" content="2016-12-13">
              2016-12-13
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/13/LeetCode-417-AC-Pacific-Atlantic-Water-Flow/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/13/LeetCode-417-AC-Pacific-Atlantic-Water-Flow/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Given an m x n matrix of non-negative integers representing the height of each unit cell in a continent, the “Pacific ocean” touches the left and top edges of the matrix and the “Atlantic ocean” touches the right and bottom edges.</p>
<p>Water can only flow in four directions (up, down, left, or right) from a cell to another one with height equal or lower.</p>
<p>Find the list of grid coordinates where water can flow to both the Pacific and Atlantic ocean.</p>
<p><strong>Note:</strong></p>
<ol>
<li>The order of returned grid coordinates does not matter.</li>
<li>Both m and n are less than 150.</li>
</ol>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Given the following 5x5 matrix:</div><div class="line"></div><div class="line">  Pacific ~   ~   ~   ~   ~ </div><div class="line">       ~  1   2   2   3  (5) *</div><div class="line">       ~  3   2   3  (4) (4) *</div><div class="line">       ~  2   4  (5)  3   1  *</div><div class="line">       ~ (6) (7)  1   4   5  *</div><div class="line">       ~ (5)  1   1   2   4  *</div><div class="line">          *   *   *   *   * Atlantic</div><div class="line"></div><div class="line">Return:</div><div class="line"></div><div class="line">[[0, 4], [1, 3], [1, 4], [2, 2], [3, 0], [3, 1], [4, 0]] (positions with parentheses in above matrix).</div></pre></td></tr></table></figure>
<hr>
<p>If you try to do a DFS or BFS on each grid to see if it can reach both Pacific and Atlantic ocean, you will get a time out error.</p>
<p>Luckily, we can solve this problem if we think in a contrary way.<br>We can deduce which grids can reach Atlantic ocean and which can reach Pacific ocean, then the intersection of the two set is the answer.</p>
<p>In this way, the number of iterations can be greatly reduced to the sum of of the 4 edges’ grids, thus averting the time out error.</p>
<p>It’s straightforward to use two vectors to separately store the connectivities of Atlantic ocean and Pacific ocean, but there is an optimization with which you only need one vector to store the same data.That is bit mask( All credits belong to <a href="https://discuss.leetcode.com/topic/62314/very-concise-c-solution-using-dfs-and-bit-mask" target="_blank" rel="external">zyoppy008</a>).<br>Since the data we are trying to maintain are basically two boolean states, two bits in one int are totally enough.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution</div><div class="line">&#123;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line"></div><div class="line">  <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; pacificAtlantic(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix)</div><div class="line">  &#123;</div><div class="line">    <span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; ret;</div><div class="line">    <span class="built_in">stack</span> &lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; s1;</div><div class="line">    <span class="built_in">stack</span> &lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; s2;</div><div class="line">    <span class="built_in">vector</span> &lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; intermidiate;</div><div class="line">    <span class="keyword">int</span> hSize, vSize;</div><div class="line">    vSize = matrix.size();</div><div class="line">    <span class="keyword">if</span> (vSize)</div><div class="line">    &#123;</div><div class="line">      hSize = matrix[<span class="number">0</span>].size();</div><div class="line">      <span class="keyword">if</span> (hSize)</div><div class="line">      &#123;</div><div class="line">        intermidiate.resize(vSize, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(hSize, <span class="number">0</span>));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; vSize; index++)</div><div class="line">        &#123;</div><div class="line">          s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(index, <span class="number">0</span>));</div><div class="line">          s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">1</span>, INT_MIN));</div><div class="line">          s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(index, hSize - <span class="number">1</span>));</div><div class="line">          s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">2</span>, INT_MIN));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; hSize; index++)</div><div class="line">        &#123;</div><div class="line">          s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">0</span>, index));</div><div class="line">          s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">1</span>, INT_MIN));</div><div class="line">          s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(vSize - <span class="number">1</span>, index));</div><div class="line">          s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">2</span>, INT_MIN));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> (!s1.empty())</div><div class="line">        &#123;</div><div class="line">          pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pos = s1.top(), meta = s2.top();</div><div class="line">          <span class="keyword">int</span> vPos = pos.first, hPos = pos.second, previousValue = meta.second, flag = meta.first;</div><div class="line">          s1.pop();</div><div class="line">          s2.pop();</div><div class="line">          <span class="keyword">if</span> (vPos &gt;= <span class="number">0</span> &amp;&amp; vPos &lt; vSize &amp;&amp; hPos &gt;= <span class="number">0</span> &amp;&amp; hPos &lt; hSize &amp;&amp; matrix[vPos][hPos] &gt;= previousValue &amp;&amp;</div><div class="line">              (intermidiate[vPos][hPos]&amp;flag) == <span class="number">0</span>)</div><div class="line">          &#123;</div><div class="line">            intermidiate[vPos][hPos] = intermidiate[vPos][hPos] | flag;</div><div class="line">            <span class="keyword">if</span> (intermidiate[vPos][hPos] == <span class="number">3</span>)</div><div class="line">            &#123;</div><div class="line">              <span class="built_in">cout</span> &lt;&lt; vPos &lt;&lt; <span class="string">' '</span> &lt;&lt; hPos &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">              ret.push_back(pos);</div><div class="line">            &#125;</div><div class="line">            s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(vPos - <span class="number">1</span>, hPos));</div><div class="line">            s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(flag, matrix[vPos][hPos]));</div><div class="line">            s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(vPos + <span class="number">1</span>, hPos));</div><div class="line">            s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(flag, matrix[vPos][hPos]));</div><div class="line">            s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(vPos, hPos - <span class="number">1</span>));</div><div class="line">            s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(flag, matrix[vPos][hPos]));</div><div class="line">            s1.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(vPos, hPos + <span class="number">1</span>));</div><div class="line">            s2.push(pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(flag, matrix[vPos][hPos]));</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">  <span class="built_in">vector</span> &lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; testData = &#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>&#125;, &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>&#125;, &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>&#125;, &#123;<span class="number">6</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>&#125;, &#123;<span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>&#125;&#125;;</div><div class="line">  Solution s;</div><div class="line">  s.pacificAtlantic(testData);</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/10/LeetCode-455-AC-Assign-Cookies/" itemprop="url">
                  [LeetCode 455, AC] Assign Cookies
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-10T01:49:42+08:00" content="2016-12-10">
              2016-12-10
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/10/LeetCode-455-AC-Assign-Cookies/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/10/LeetCode-455-AC-Assign-Cookies/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Assume you are an awesome parent and want to give your children some cookies. But, you should give each child at most one cookie. Each child i has a greed factor gi, which is the minimum size of a cookie that the child will be content with; and each cookie j has a size sj. If sj &gt;= gi, we can assign the cookie j to the child i, and the child i will be content. Your goal is to maximize the number of your content children and output the maximum number.</p>
<p><strong>Note:</strong><br>You may assume the greed factor is always positive. </p>
<p>You cannot assign more than one cookie to one child.</p>
<h4 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1:"></a>Example 1:</h4><p><strong>Input:</strong> [1,2,3], [1,1]</p>
<p><strong>Output:</strong> 1</p>
<p><strong>Explanation:</strong> You have 3 children and 2 cookies. The greed factors of 3 children are 1, 2, 3.<br>And even though you have 2 cookies, since their size is both 1, you could only make the child whose greed factor is 1 content.<br>You need to output 1.</p>
<h4 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2:"></a>Example 2:</h4><p><strong>Input:</strong> [1,2], [1,2,3]</p>
<p><strong>Output:</strong> 2</p>
<p><strong>Explanation:</strong> You have 2 children and 3 cookies. The greed factors of 2 children are 1, 2.<br>You have 3 cookies and their sizes are big enough to gratify all of the children,<br>You need to output 2.</p>
<hr>
<p>This is a typical greedy problem.</p>
<p>The partial best solution is to find the smallest cookie that could be given to the least greedy child.</p>
<p>Find partial best solutions in repetition until there is no cooky that could be given to the least greedy child or all children receive a cooky.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Solution</div><div class="line">&#123;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">int</span> <span class="title">findContentChildren</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; g, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; s)</span></span></div><div class="line">  &#123;</div><div class="line">    sort(g.begin(),g.end());</div><div class="line">    sort(s.begin(),s.end());</div><div class="line">    <span class="keyword">int</span> result = <span class="number">0</span>;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator child = g.begin();</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::iterator cooky = s.begin();</div><div class="line">    <span class="keyword">while</span> (child != g.end() &amp;&amp; cooky != s.end())</div><div class="line">    &#123;</div><div class="line">      <span class="keyword">if</span> (*cooky &gt;= *child)</div><div class="line">      &#123;</div><div class="line">        result += <span class="number">1</span>;</div><div class="line">        child ++;</div><div class="line">      &#125;</div><div class="line">      cooky ++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">  Solution s = Solution();</div><div class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; children(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;);</div><div class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cookies(&#123;<span class="number">1</span>, <span class="number">1</span>&#125;);</div><div class="line">  <span class="built_in">cout</span>&lt;&lt;s.findContentChildren(children, cookies)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  <span class="built_in">cout</span>&lt;&lt;<span class="string">"*******"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; children1(&#123;<span class="number">1</span>, <span class="number">2</span>&#125;);</div><div class="line">  <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cookies1(&#123;<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>&#125;);</div><div class="line">  <span class="built_in">cout</span>&lt;&lt;s.findContentChildren(children1, cookies1)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/" itemprop="url">
                  How to Use Postmessage to Communicate with iframe in React
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-01T06:57:44+08:00" content="2016-12-01">
              2016-12-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>We all know that we should avert the use of iframe, but sometimes, we have no choice but to use it.<br>This article is about how to use postmessage to communicate with an iframe using React.<br>Assumptions were made that you know what is postmessage and how to use it, so if you are not familiar with it, read this this <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="external">introduction to postmessage</a> before moving on.<br>At first I want you to know as we need to run js on websites within and outside the child iframe so this method can only be used when you have administration privilege on both sides.</p>
<p>Let’s see what we can do with this method.</p>
<p><img src="/images/iframePostmessge.gif" alt="what we can do"></p>
<p>As you can see, informations about the scrollTop and height of the child iframe is transfered to the parent component so we can tell whether or not the child iframe is scrolled to top or bottom.</p>
<p>To achieve this, we had to run the following javascript inside the website which is shown inside the iframe.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> scrollTop;</div><div class="line">  <span class="keyword">var</span> domain;</div><div class="line">  <span class="keyword">var</span> url;</div><div class="line">  <span class="keyword">var</span> body;</div><div class="line">  <span class="keyword">var</span> target;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sendHeight</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    target.postMessage(&#123; <span class="attr">url</span>: url, <span class="attr">value</span>: body.scrollHeight, <span class="attr">type</span>: <span class="string">'height'</span> &#125;, domain);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sendScrollTop</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    scrollTop = body.scrollTop;</div><div class="line">    target.postMessage(&#123; <span class="attr">url</span>: url, <span class="attr">value</span>: scrollTop, <span class="attr">type</span>: <span class="string">'scrollTop'</span> &#125;, domain);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  body = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>];</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (event.data.type) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'setScroll'</span>:</div><div class="line">        body.scrollTop = event.data.value;</div><div class="line">        scrollTop = event.data.value;</div><div class="line">        url = event.data.url;</div><div class="line">        target = event.source;</div><div class="line">        domain = event.origin;</div><div class="line">        sendHeight();</div><div class="line">        sendScrollTop();</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, receiveMessage);</div><div class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (e.target.activeElement === body &amp;&amp; scrollTop !== body.scrollTop) &#123;</div><div class="line">      sendScrollTop();</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>Basically, the above code does 3 thing.</p>
<ol>
<li>Set up a handler listening to the incoming message sent from the parent container through postmessage.</li>
<li>Set up a handler listening to the scrolling event and send scrollTop to the parent container at appropriate time.</li>
<li>Send height to the parent container;</li>
</ol>
<p>Now let’s move to the parent side.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</div><div class="line"><span class="keyword">import</span> &#123; setScrollTop, setHeight &#125; <span class="keyword">from</span> <span class="string">'./action'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">container</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.msgHandler = <span class="keyword">this</span>.msgHandler.bind(<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.send = <span class="keyword">this</span>.send.bind(<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.componentDidMount = <span class="keyword">this</span>.componentDidMount.bind(<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">this</span>.maxScrollTop = <span class="number">10</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  send() &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.container &amp;&amp; <span class="keyword">this</span>.container.contentWindow) &#123;</div><div class="line">      <span class="keyword">this</span>.container.contentWindow.postMessage(<span class="keyword">this</span>.data, <span class="string">'*'</span>);</div><div class="line">      <span class="keyword">this</span>.container.scrollTop = <span class="number">20</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.received) &#123;</div><div class="line">      setTimeout(<span class="keyword">this</span>.send, <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.previous = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">this</span>.next = <span class="literal">false</span>;</div><div class="line">    <span class="keyword">this</span>.data = &#123;</div><div class="line">      <span class="attr">url</span>: <span class="keyword">this</span>.props.content,</div><div class="line">      <span class="attr">type</span>: <span class="string">'setScroll'</span>,</div><div class="line">      <span class="attr">value</span>: <span class="keyword">this</span>.props.scrollTop,</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">this</span>.send();</div><div class="line">    <span class="keyword">this</span>.reveived = <span class="literal">false</span>;</div><div class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="keyword">this</span>.msgHandler);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  msgHandler(e) &#123;</div><div class="line">    <span class="keyword">if</span> (e.data.url !== <span class="keyword">this</span>.props.content) &#123;</div><div class="line">      <span class="comment">// console.info(e.data.url);</span></div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">switch</span> (e.data.type) &#123;</div><div class="line">      <span class="keyword">case</span> <span class="string">'height'</span>:</div><div class="line">        <span class="keyword">this</span>.maxScrollTop = e.data.value - <span class="keyword">this</span>.container.offsetHeight;</div><div class="line">        <span class="keyword">this</span>.received = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> <span class="string">'scrollTop'</span>:</div><div class="line">        <span class="keyword">this</span>.props.saveScroll(e.data.value);</div><div class="line"></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div</div><div class="line">        className = 'group'</div><div class="line">      &gt;</div><div class="line">        &lt;h4 &gt;</div><div class="line">          &#123;`Scroll Top:$&#123;this.props.scrollTop&#125;`&#125;</div><div class="line">        &lt;/h4&gt;</div><div class="line">        &lt;button</div><div class="line">          onClick = &#123;() =&gt; alert('wanna go to previous page?')&#125;</div><div class="line">          disabled=&#123;this.props.scrollTop !== 0&#125;</div><div class="line">        &gt;</div><div class="line">          Previous</div><div class="line">        &lt;/button&gt;</div><div class="line">        &lt;iframe</div><div class="line">          ref = &#123;e =&gt; &#123;</div><div class="line">            this.container = e;</div><div class="line">          &#125;&#125;</div><div class="line"></div><div class="line">          src = &#123;this.props.content&#125;</div><div class="line">        /&gt;</div><div class="line">        &lt;button</div><div class="line">          disabled=&#123;this.props.scrollTop &lt; this.maxScrollTop&#125;</div><div class="line">            onClick = &#123;() =&gt; alert('wanna go to next page?')&#125;</div><div class="line">        &gt;</div><div class="line">          Next</div><div class="line">        &lt;/button&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">container.propTypes = &#123;</div><div class="line">  scrollTop: PropTypes.number.isRequired,</div><div class="line">  saveScroll: PropTypes.func.isRequired,</div><div class="line">  content: PropTypes.string.isRequired,</div><div class="line">&#125;;</div><div class="line"></div><div class="line">container.mapStateToProps = state =&gt; (&#123;</div><div class="line">  scrollTop: state.scrollTop,</div><div class="line">  height: state.height,</div><div class="line">  content: 'http://localhost:8080/one.html',</div><div class="line">&#125;);</div><div class="line"></div><div class="line">container.mapDispatchToProps = dispatch =&gt; (&#123;</div><div class="line">  saveScroll: num =&gt; &#123;</div><div class="line">    dispatch(setScrollTop(Math.round(num)));</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  saveHeight: num =&gt; &#123;</div><div class="line">    dispatch(setHeight(num));</div><div class="line">  &#125;,</div><div class="line">&#125;);</div><div class="line"></div><div class="line">export default connect(container.mapStateToProps,</div><div class="line">                       container.mapDispatchToProps,</div><div class="line">                       container.mapMergeProps)(container);</div></pre></td></tr></table></figure></p>
<p>Firstly, <code>send()</code> is continuously invoked to establish connection with the child iframe in <code>componentDidMount</code> until a reply is recieved.<br>Then monitor the scrollTop and height attribute of the child iframe inside the <code>msgHandler</code>.<br>Having known the scrollTop and height, we can tell if the user scrolls to the top or bottom by comparing those two attributes.</p>
<h3 id="What-is-Missing-in-This-Article"><a href="#What-is-Missing-in-This-Article" class="headerlink" title="What is Missing in This Article?"></a>What is Missing in This Article?</h3><p>For safety reasons, we should always check the origin of messages in both the parent and child sides, but to keep the article short, I ignored this part.<strong>(Never do this in your production environment)</strong></p>
<p>If you want to know more about security measures which we should implement when using postmessage, check out this <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="external">document</a>.</p>
<hr>
<p>Full source code were disclosed at this <a href="https://github.com/lo-tp/exampleOfUsingPostmessageInReact" target="_blank" rel="external">repo</a>, play with it if you are interested.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/26/Leetcode-126-Word-Ladder-II/" itemprop="url">
                  [LeetCode 126, TLE] Word Ladder II
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-11-26T09:39:16+08:00" content="2016-11-26">
              2016-11-26
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/26/Leetcode-126-Word-Ladder-II/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/11/26/Leetcode-126-Word-Ladder-II/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>If you come here for a solution to the problem, you are in a wrong place.<br>Because <strong>my code for this quiz wasn’t accepted yet</strong> and the purpose of this post is to make a summary about what I have learnt about BFS from doing this exercise.<br>I will share my code at the end of this post and any ideas on where my code is wrong would be greatly appreciated.</p>
<h5 id="When-Should-We-Use-BFS"><a href="#When-Should-We-Use-BFS" class="headerlink" title="When Should We Use BFS"></a>When Should We Use BFS</h5><p>When the target is to find the shortest path,BFS is a good choice.<br>If you do not have to find all the shortest paths, then you can stop whenever the first path is found.<br>Otherwise you would have to wait until all the nodes from current layer are processed.</p>
<h5 id="How-to-Implement-BFS"><a href="#How-to-Implement-BFS" class="headerlink" title="How to Implement BFS"></a>How to Implement BFS</h5><p>Use a queue to store the tree, and take advantage of the FIFO characteristic of queue to implement BFS.</p>
<h5 id="Optimizations-You-May-Want-To-Use-With-BFS"><a href="#Optimizations-You-May-Want-To-Use-With-BFS" class="headerlink" title="Optimizations You May Want To Use With BFS"></a>Optimizations You May Want To Use With BFS</h5><ol>
<li>Use <a href="https://www.google.com.au/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=3&amp;ved=0ahUKEwiOpK-Fl8bQAhXMlJQKHeK9ARUQFggiMAI&amp;url=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FAdjacency_matrix&amp;usg=AFQjCNGxQVlDVOI2_pmf2ywMgi_OSGVlCg&amp;bvm=bv.139782543,d.dGo&amp;cad=rja" target="_blank" rel="external">adjacency matrix</a> to store the relationships between nodes so you only has to do this calculation once.</li>
<li>Save the length of the first path you found, whenever the depth of another path is larger than it, you can safely ignore that path.</li>
<li>Save all the nodes of current layer and remove them when depth increasing to improve efficiency of further searches.</li>
</ol>
<h5 id="A-Mistake-You-May-Make-When-Using-BFS"><a href="#A-Mistake-You-May-Make-When-Using-BFS" class="headerlink" title="A Mistake You May Make When Using BFS"></a>A Mistake You May Make When Using BFS</h5><p>Possibility exists that you may include paths that are longer than the shortest ones in your result set so do a filter to get rid of them.<br>Luckily, you only need to take care of this when you are required to find all the shortest paths.</p>
<h5 id="Lessons-I-Have-Learnt-about-Javascript"><a href="#Lessons-I-Have-Learnt-about-Javascript" class="headerlink" title="Lessons I Have Learnt about Javascript"></a>Lessons I Have Learnt about Javascript</h5><ol>
<li><p>The Right Way to Check the Existence of an Element Within an Array<br>I used <code>!array.findIndex(element !== target)</code> to check if target is not in array , but this was wrong when target is the first element of array.<br>The right way is to use <code>array.findIndex(element !== target)===undefined</code>.</p>
</li>
<li><p>A Fast Way to Get the Last Element of an Array<br><code>array.slice(-1)[0]</code>.</p>
</li>
</ol>
<hr>
<p>Here comes the code, I have no idea which part is wrong…lol.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">first</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.queue = [&#123;</div><div class="line">    <span class="attr">path</span>: [<span class="number">0</span>],</div><div class="line">    <span class="attr">word</span>: first,</div><div class="line">  &#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">Queue.prototype.enque = <span class="function"><span class="keyword">function</span> (<span class="params">elements</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.queue = <span class="keyword">this</span>.queue.concat(elements);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Queue.prototype.dequeue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.queue.pop();</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> getDifferenceNum = <span class="function">(<span class="params">source, target</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> ret = source.filter(<span class="function">(<span class="params">s, i</span>) =&gt;</span> s !== target[i]).length;</div><div class="line">  <span class="keyword">return</span> ret;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params">begin, end, list</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.results = [];</div><div class="line">  <span class="keyword">this</span>.list = [begin, ...list];</div><div class="line">  <span class="keyword">this</span>.list = <span class="keyword">this</span>.list.map(<span class="function"><span class="params">s</span> =&gt;</span> s.split(<span class="string">''</span>));</div><div class="line">  <span class="keyword">this</span>.end = end.split(<span class="string">''</span>);</div><div class="line">  <span class="keyword">this</span>.queue = <span class="keyword">new</span> Queue(begin.split(<span class="string">''</span>));</div><div class="line">  <span class="keyword">this</span>.deep = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</div><div class="line">  <span class="keyword">this</span>.removeRepitition();</div><div class="line">  <span class="keyword">this</span>.makeAdjacencyMatrix();</div><div class="line">  <span class="keyword">this</span>.currentLevel = <span class="number">0</span>;</div><div class="line">  <span class="keyword">this</span>.currentLevelElements = [];</div><div class="line">  <span class="keyword">this</span>.usedElements = [];</div><div class="line">&#125;</div><div class="line"></div><div class="line">Test.prototype.makeAdjacencyMatrix = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> length = <span class="keyword">this</span>.list.length;</div><div class="line">  <span class="keyword">this</span>.adjacency = [];</div><div class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</div><div class="line">  <span class="keyword">while</span> (index &lt; length) &#123;</div><div class="line">    <span class="keyword">this</span>.adjacency[index] = [];</div><div class="line">    index += <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  index = <span class="number">0</span>;</div><div class="line">  <span class="keyword">while</span> (index &lt; length) &#123;</div><div class="line">    <span class="keyword">let</span> innerIndex = index + <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span> (innerIndex &lt; length) &#123;</div><div class="line">      <span class="keyword">if</span> (getDifferenceNum(<span class="keyword">this</span>.list[index], <span class="keyword">this</span>.list[innerIndex]) === <span class="number">1</span>) &#123;</div><div class="line">        <span class="comment">// making use of the symmetry of the adjacency matrix</span></div><div class="line">        <span class="keyword">this</span>.adjacency[index].push(innerIndex);</div><div class="line">        <span class="keyword">this</span>.adjacency[innerIndex].push(index);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      innerIndex += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    index += <span class="number">1</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Test.prototype.removeRepitition = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> hash = &#123;&#125;;</div><div class="line">  <span class="keyword">const</span> newList = [];</div><div class="line">  <span class="keyword">this</span>.list.forEach(<span class="function"><span class="params">l</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (!hash[l]) &#123;</div><div class="line">      hash[l] = <span class="literal">true</span>;</div><div class="line">      newList.push(l);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">  <span class="keyword">this</span>.list = newList;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Test.prototype.findChildren = <span class="function"><span class="keyword">function</span> (<span class="params">parent</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> currentIndex = parent.path.slice(<span class="number">-1</span>)[<span class="number">0</span>];</div><div class="line">  <span class="keyword">if</span> (parent.path.length &gt; <span class="keyword">this</span>.currentLevel) &#123;</div><div class="line">    <span class="keyword">this</span>.usedElements = <span class="keyword">this</span>.usedElements.concat(<span class="keyword">this</span>.currentLevelElements);</div><div class="line">    <span class="keyword">this</span>.currentLevelElements = [currentIndex];</div><div class="line">    <span class="keyword">this</span>.currentLevel = parent.path.length;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">this</span>.currentLevelElements.push(currentIndex);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> ret = <span class="keyword">this</span>.adjacency[currentIndex].filter(<span class="function"><span class="params">l</span> =&gt;</span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">return</span> parent.path.find(<span class="function"><span class="params">p</span> =&gt;</span> p === l) === <span class="literal">undefined</span></div><div class="line">        &amp;&amp; <span class="keyword">this</span>.usedElements.find(<span class="function"><span class="params">p</span> =&gt;</span> p === l) === <span class="literal">undefined</span>;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> ret.map(<span class="function"><span class="params">r</span> =&gt;</span> (</div><div class="line">    &#123;</div><div class="line">      <span class="attr">word</span>: <span class="keyword">this</span>.list[r],</div><div class="line">      <span class="attr">path</span>: [...parent.path, r],</div><div class="line">    &#125;</div><div class="line">    ));</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Test.prototype.findResults = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> current = <span class="keyword">this</span>.queue.dequeue();</div><div class="line">  <span class="keyword">while</span> (current) &#123;</div><div class="line">    <span class="keyword">if</span> (current) &#123;</div><div class="line">      <span class="keyword">if</span> (getDifferenceNum(current.word, <span class="keyword">this</span>.end) === <span class="number">1</span></div><div class="line">          &amp;&amp; current.path.length &lt;= <span class="keyword">this</span>.deep) &#123;</div><div class="line">        <span class="keyword">this</span>.deep = current.path.length;</div><div class="line">        <span class="keyword">this</span>.results.push(current.path);</div><div class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (current.path.length &lt; <span class="keyword">this</span>.deep) &#123;</div><div class="line">        <span class="keyword">const</span> children = <span class="keyword">this</span>.findChildren(current);</div><div class="line">        <span class="keyword">this</span>.queue.enque(children);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    current = <span class="keyword">this</span>.queue.dequeue();</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Test.prototype.filterResults = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> minLength = <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</div><div class="line">  <span class="keyword">this</span>.results.forEach(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (r.length &lt; minLength) &#123;</div><div class="line">      minLength = r.length;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">  <span class="keyword">this</span>.results = <span class="keyword">this</span>.results.filter(<span class="function"><span class="params">r</span> =&gt;</span> r.length &lt;= minLength);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Test.prototype.convertResults = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.results = <span class="keyword">this</span>.results.map(<span class="function"><span class="params">r</span> =&gt;</span> r.map(<span class="function"><span class="params">l</span> =&gt;</span> <span class="keyword">this</span>.list[l]));</div><div class="line">  <span class="keyword">this</span>.results.forEach(<span class="function"><span class="params">r</span> =&gt;</span> r.push(<span class="keyword">this</span>.end.join(<span class="string">''</span>)));</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> findLadders = <span class="function"><span class="keyword">function</span> (<span class="params">beginWord, endWord, wordList</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> tem = <span class="keyword">new</span> Test(beginWord, endWord, wordList);</div><div class="line">  tem.findResults();</div><div class="line">  tem.filterResults();</div><div class="line">  tem.list = tem.list.map(<span class="function"><span class="params">t</span> =&gt;</span> t.join(<span class="string">''</span>));</div><div class="line">  tem.convertResults();</div><div class="line">  <span class="keyword">return</span> tem.results;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/06/How-to-Write-Your-Redux-Action-in-a-More-Concise-Style/" itemprop="url">
                  How-to-Write-Your-Redux-Action-in-a-More-Concise-Style
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-11-06T06:26:22+08:00" content="2016-11-06">
              2016-11-06
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/06/How-to-Write-Your-Redux-Action-in-a-More-Concise-Style/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/11/06/How-to-Write-Your-Redux-Action-in-a-More-Concise-Style/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Let’s say you are working on a project about article writing and now you are about to write actions to create and update articles.<br>To create an article, you would need an action creator like this.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> createArticle = <span class="function"><span class="params">title</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">type</span>: ARTICLE,</div><div class="line">        <span class="attr">operation</span>: CREATE,</div><div class="line">        title</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>When it comes to article updating, you need another action creator.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> updateArticle = <span class="function">(<span class="params"> newTitle, title</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">type</span>: ARTICLE,</div><div class="line">        <span class="attr">operation</span>: UPDATE,</div><div class="line">        title,</div><div class="line">        newTitle</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>These two functions looks like each other very much.<br>Tasks like these are tedious and you may wonder if there is a way to get rid of these repetitive jobs.</p>
<p>Of course yes, but you need some extra help.<br>I highly recommend you to read the wiki page of <a href="https://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="external">functional programming</a> if it’s new to you.<br>Otherwise the following snippets may be very strange to you.</p>
<p>To do functional programming, you may need some help of libraries such as <a href="http://ramdajs.com/" target="_blank" rel="external">Ramda</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> R = <span class="built_in">require</span>(<span class="string">"ramda"</span>);</div><div class="line"><span class="keyword">const</span> actionArg = R.curry(<span class="function">(<span class="params">type, operation, newTitle, title</span>)=&gt;</span> (</div><div class="line">  &#123;</div><div class="line">    type, operation, title, newTitle</div><div class="line">  &#125;</div><div class="line">));</div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> actionOfArticle = actionArg(ARTICLE);</div></pre></td></tr></table></figure>
<p>With the above snippet, basically you are defining a function called <code>actionArg</code> that would return another function.<br>The function returned by <code>actionArg</code> would return an object describing the action you are creating.<br>At the last line you are making an action to deal with all the article related stuff.</p>
<p>Here comes the magic.<br>Now, to create an article, you just need to define an one line function.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> createArticle = actionOfArticle(CREATE,<span class="number">0</span>,R.__)</div></pre></td></tr></table></figure></p>
<p>Also it becomes easier if you want to update the title of an existing article.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> updateArticle = actionOfArticle(UPDATE,R.__,R.__)</div></pre></td></tr></table></figure></p>
<p>This may not seem to be useful when you are only dealing with simple actions.<br>However when actions become complex, you can save a lot of time by writing actions in this way.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/07/Drag-Gestures-Inside-Mobile-Browsers-Purely-in-CSS-and-JS/" itemprop="url">
                  Drag Gestures Inside Mobile Browsers Implemented Purely by CSS and JS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-07T04:46:00+08:00" content="2016-09-07">
              2016-09-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/07/Drag-Gestures-Inside-Mobile-Browsers-Purely-in-CSS-and-JS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/09/07/Drag-Gestures-Inside-Mobile-Browsers-Purely-in-CSS-and-JS/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/images/swipteToDelete.gif" alt="Swipe To Delete"><br>Drag gesture, like the image above, is a very good interaction model for touch devices.<br>This article is about the implementation of drag gesture on mobile browsers.</p>
<p>I use react to simplify the code. However you can accomplish it without any framework.</p>
<p>The basic idea is to make a scrollable widget comprised by two component.<br>The first component is always visible while the second one(named <strong>drag-btn</strong> in this article) can only be seen after scrolling.<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;li</div><div class="line">  onClick = &#123;this.props.click.bind(this)&#125;</div><div class="line">  ref = &#123;e=&gt; &#123;</div><div class="line">    this.li = e;</div><div class="line">  &#125;&#125;</div><div class="line">  className = &#123;"menu__item"&#125;</div><div class="line">  onScroll = &#123;this.onScroll&#125;</div><div class="line">&gt;</div><div class="line">  &lt;div</div><div class="line">    className = &#123;"text"&#125;</div><div class="line">  &gt;</div><div class="line">    &lt;text &gt;</div><div class="line">      &#123;this.props.text&#125;</div><div class="line">    &lt;/text&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">  &lt;div</div><div class="line">    ref = &#123;e=&gt; &#123;</div><div class="line">      this.dragBtn = e;</div><div class="line">    &#125;&#125;</div><div class="line">    className = &#123;`drag-btn $&#123;this.props.dragClass[0]&#125;`&#125;</div><div class="line">  &gt;</div><div class="line">    &lt;text&gt;</div><div class="line">      drag</div><div class="line">    &lt;/text&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/li&gt;</div></pre></td></tr></table></figure></p>
<p>We use <code>onscroll</code> to monitor the scrolling.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">onScroll:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.scroll = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.li.scrollLeft &gt; <span class="keyword">this</span>.scrollThreshhold) &#123;</div><div class="line">      <span class="keyword">this</span>.dragBtn.className = <span class="string">`drag-btn <span class="subst">$&#123;<span class="keyword">this</span>.props.dragClass[<span class="number">1</span>]&#125;</span>`</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">this</span>.dragBtn.className = <span class="string">`drag-btn <span class="subst">$&#123;<span class="keyword">this</span>.props.dragClass[<span class="number">0</span>]&#125;</span>`</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<p>When the user scrolls to certain position, we have to tell the user that the drag action is about to be triggered.This is fulfilled by adding another class to drag-btn component to change its color.</p>
<p>When the user stops scrolling, a <strong>touchend</strong> event is emitted which can be utilized to check if drag action should be executed.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">onTouchEnd:<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.scroll) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.li.scrollLeft &gt; <span class="keyword">this</span>.scrollThreshhold) &#123;</div><div class="line">      <span class="keyword">this</span>.props.drag.bind(<span class="keyword">this</span>)();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">this</span>.li.scrollLeft = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.scroll = <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>You can check the jsfiddle snippet below to see a working example.<strong>Check it on your phone as no touchend event is emitted on the desktop browser.</strong></p>
<p>In order to keep it concise, only the most pertinent code was demonstrated in this article.<br>For more details, check this <a href="https://github.com/lo-tp/DragInBrowsers" target="_blank" rel="external">repo</a>.</p>
<iframe scrolling="no" width="100%" height="300" src="http://jsfiddle.net/nq3qero4/embedded/result,js/light" frameborder="0" allowfullscreen></iframe>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/Clone-An-Existing-Linux-OS-To-Another-Disk-Without-Pain/" itemprop="url">
                  A Painless Way to Clone an Existing Linux OS to Another Disk
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-29T09:08:11+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/29/Clone-An-Existing-Linux-OS-To-Another-Disk-Without-Pain/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/29/Clone-An-Existing-Linux-OS-To-Another-Disk-Without-Pain/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>We all know that installing operation system is a toil.<br><strong>So let’s say no to restinalling OS.</strong><br>Recently, I bought a larger SSD and intended to use it to replace the older one.<br>In order to circumvent all the dull jobs I have to do with the reinstalling thing, I decided to clone the existing Ubuntu Mate 14.04 from my older SSD to the newly bought one.<br>Luckily I succeeded.<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/08/29/Clone-An-Existing-Linux-OS-To-Another-Disk-Without-Pain/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/How-to-Customize-Password-Resetting-Page-in-Meteor/" itemprop="url">
                  How to Customize Password Resetting Page in Meteor
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-29T07:24:48+08:00" content="2016-08-29">
              2016-08-29
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/29/How-to-Customize-Password-Resetting-Page-in-Meteor/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/29/How-to-Customize-Password-Resetting-Page-in-Meteor/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Meteor Already has a built-in password reset mechanism.<br>Normally, you would use it with the <code>accounts-ui</code> package.<br>But things become tricky when you want to customize the password resetting page.<br>In this article, I will walk you through on how to implement your own password resetting page in Meteor.<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/08/29/How-to-Customize-Password-Resetting-Page-in-Meteor/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/portrait.svg"
               alt="lotp" />
          <p class="site-author-name" itemprop="name">lotp</p>
          <p class="site-description motion-element" itemprop="description">Every Day in Life Is a First Time</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lo-tp" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  Github
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lotp</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'blog-lotp-xyz';
      var disqus_identifier = 'index.html';
      var disqus_title = "";
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  




  
  

  

  

  

</body>
</html>

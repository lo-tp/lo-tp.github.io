<!DOCTYPE html>
<html lang="zh">

<head>
      <meta name="google-site-verification" content="3_Og0vGTM1q3fMJ_WjUj2f4vdqlQpD2TS92MVwmgHzQ" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="http://lo-tp.github.io/serial-1seting-up-ruby-on-rails-development-environment-with-docker.html" />

    <title>  LOTP's Blog &mdash; Serial 1:Seting Up Ruby on Rails Development Environment with Docker
</title>




    <link rel="stylesheet" href="http://lo-tp.github.io/theme/css/style.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


    <meta name="author" content="Lotp">
    <meta name="description" content="This is a the first post of a series to record how I learn ROR(ruby on rails) from scratch. In this post, I’ll show you how to set up ROR development environment. Preparations Ensure you had docker and docker-compose installed on your machine. Create an directory where you ...">
  <meta name="tags" contents="Docker, Ruby, Docker Compose, ">
</head>

<body>
<header class="header">
  <div class="container">
      <div class="header-image pull-left">
        <a class="nodec" href="http://lo-tp.github.io"><img src=http://ww3.sinaimg.cn/mw690/005N6Qx8gw1ewt0kld679j305k05kmxk.jpg></a>
      </div>
    <div class="header-inner">
      <h1 class="header-name">
        <a class="nodec" href="http://lo-tp.github.io">LOTP's Blog</a>
      </h1>
      <h3 class="header-text">It's all about Hack, have fun</h3>
      <ul class="header-menu list-inline">
          <li><a class="nodec" href="/tags.html" target="_blank">Tag</a></li>
          <li><a class="nodec" href="/categories.html" target="_blank">Categories</a></li>
      </ul>
    </div>
  </div>
</header> <!-- /.header -->  <div class="container">
  <div class="post full-post">
    <h1 class="post-title">
      <a href="/serial-1seting-up-ruby-on-rails-development-environment-with-docker.html" title="Permalink to Serial 1:Seting Up Ruby on Rails Development Environment with Docker">Serial 1:Seting Up Ruby on Rails Development Environment with&nbsp;Docker</a>
    </h1>
    <ul class="list-inline">
      <li class="post-date">
        Tue 06 October 2015
        <!-- <a class="text-muted" href="/serial-1seting-up-ruby-on-rails-development-environment-with-docker.html" title="2015-10-06T23:20:00+08:00">Tue 06 October 2015</a> -->
      </li>
      <li class="muted">|</li>
      <li class="post-category">
        <a href="http://lo-tp.github.io/category/learn-ruby.html">Learn Ruby</a>
      </li>
      <li class="muted">|</li>
      <li class="post-tags">
<a href="tag/docker.html"> Docker</a><a href="tag/ruby.html"> Ruby</a><a href="tag/docker-compose.html"> Docker Compose</a>      </li>
    </ul>
    <div class="post-content">
      <p>This is a the first post of a series to record how I learn <span class="caps">ROR</span>(ruby on rails) from scratch.
In this post, I&#8217;ll show you how to set up <span class="caps">ROR</span> development&nbsp;environment.</p>
<h3>Preparations</h3>
<ol>
<li>Ensure you had <em>docker</em> and <em>docker-compose</em> installed on your&nbsp;machine.</li>
<li>Create an directory where you could save related files, lets call it&nbsp;tem.</li>
<li>Create another directory within tem called&nbsp;src.</li>
</ol>
<h3>Create 3 files in&nbsp;tem</h3>
<ul>
<li>docker-compose.yml</li>
</ul>
<div class="highlight"><pre><span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">.</span>
        <span class="l-Scalar-Plain">dockerfile</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">server.dockerfile</span>            
        <span class="l-Scalar-Plain">container_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">RailsServer</span>
        <span class="l-Scalar-Plain">command</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">bin/rails s -p 3000 -b &#39;0.0.0.0&#39;</span> 
        <span class="l-Scalar-Plain">ports</span><span class="p-Indicator">:</span> 
                <span class="p-Indicator">-</span> <span class="s">&quot;your</span><span class="nv"> </span><span class="s">ip</span><span class="nv"> </span><span class="s">address:50004:3000&quot;</span>
        <span class="l-Scalar-Plain">volumes</span><span class="p-Indicator">:</span>
                <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">./src:/tmp/myApp</span>
</pre></div>


<ul>
<li>server.dockerfile</li>
</ul>
<div class="highlight"><pre><span class="l-Scalar-Plain">FROM ruby:2.2.3</span>
<span class="l-Scalar-Plain">RUN useradd username</span>
<span class="l-Scalar-Plain">RUN apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev nodejs</span>
<span class="l-Scalar-Plain">ADD Gemfile /tmp/Gemfile</span>
<span class="l-Scalar-Plain">WORKDIR /tmp</span>
<span class="l-Scalar-Plain">RUN bundle install</span>
<span class="l-Scalar-Plain">USER username</span>
<span class="l-Scalar-Plain">RUN mkdir /tmp/myApp</span>
<span class="l-Scalar-Plain">WORKDIR /tmp/myApp</span>
</pre></div>


<ul>
<li>Gemfile</li>
</ul>
<div class="highlight"><pre><span class="l-Scalar-Plain">source &#39;https://rubygems.org&#39;</span>


<span class="l-Scalar-Plain"># Bundle edge Rails instead</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">gem &#39;rails&#39;, github</span><span class="p-Indicator">:</span> <span class="s">&#39;rails/rails&#39;</span>
<span class="l-Scalar-Plain">gem &#39;rails&#39;, &#39;4.2.4&#39;</span>
<span class="c1"># Use sqlite3 as the database for Active Record</span>
<span class="l-Scalar-Plain">gem &#39;sqlite3&#39;</span>
<span class="c1"># Use SCSS for stylesheets</span>
<span class="l-Scalar-Plain">gem &#39;sass-rails&#39;, &#39;~&gt; 5.0&#39;</span>
<span class="c1"># Use Uglifier as compressor for JavaScript assets</span>
<span class="l-Scalar-Plain">gem &#39;uglifier&#39;, &#39;&gt;= 1.3.0&#39;</span>
<span class="c1"># Use CoffeeScript for .coffee assets and views</span>
<span class="l-Scalar-Plain">gem &#39;coffee-rails&#39;, &#39;~&gt; 4.1.0&#39;</span>
<span class="c1"># See https://github.com/rails/execjs#readme for more supported runtimes</span>
<span class="l-Scalar-Plain">gem &#39;therubyracer&#39;, platforms</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">:ruby</span>

<span class="c1"># Use jquery as the JavaScript library</span>
<span class="l-Scalar-Plain">gem &#39;jquery-rails&#39;</span>
<span class="c1"># Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks</span>
<span class="l-Scalar-Plain">gem &#39;turbolinks&#39;</span>
<span class="c1"># Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder</span>
<span class="l-Scalar-Plain">gem &#39;jbuilder&#39;, &#39;~&gt; 2.0&#39;</span>
<span class="c1"># bundle exec rake doc:rails generates the API under doc/api.</span>
<span class="l-Scalar-Plain">gem &#39;sdoc&#39;, &#39;~&gt; 0.4.0&#39;, group</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">:doc</span>

<span class="c1"># Use ActiveModel has_secure_password</span>
<span class="c1"># gem &#39;bcrypt&#39;, &#39;~&gt; 3.1.7&#39;</span>

<span class="c1"># Use Unicorn as the app server</span>
<span class="c1"># gem &#39;unicorn&#39;</span>

<span class="c1"># Use Capistrano for deployment</span>
<span class="c1"># gem &#39;capistrano-rails&#39;, group: :development</span>

<span class="l-Scalar-Plain">group :development, :test do</span>
  <span class="l-Scalar-Plain"># Call &#39;byebug&#39; anywhere in the code to stop execution and get a debugger console</span>
  <span class="l-Scalar-Plain">gem &#39;byebug&#39;</span>
<span class="l-Scalar-Plain">end</span>

<span class="l-Scalar-Plain">group :development do</span>
  <span class="l-Scalar-Plain"># Access an IRB console on exception pages or by using &lt;%= console %&gt; in views</span>
  <span class="l-Scalar-Plain">gem &#39;web-console&#39;, &#39;~&gt; 2.0&#39;</span>

  <span class="l-Scalar-Plain"># Spring speeds up development by keeping your application running in the background. Read more</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/rails/spring</span>
  <span class="l-Scalar-Plain">gem &#39;spring&#39;</span>
<span class="l-Scalar-Plain">end</span>
</pre></div>


<h3>Building</h3>
<ol>
<li><code>docker-compose run server rails new .</code>(If asked overwrite, chose&nbsp;yes).</li>
<li><code>docker-compose up</code>.</li>
</ol>
<h3>Access Your <span class="caps">ROR</span>&nbsp;Site</h3>
<ol>
<li>Browse <strong>Your <span class="caps">IP</span> address:50004</strong> (You should change the <span class="caps">IP</span> address to the&nbsp;yours).</li>
</ol>
    </div>
  </div>
  <hr class="separator">
  <div class="col-md-8 col-md-offset-2">
  </div>
  </div>
<footer class="footer">
  <div class="container">
    <p class="text-center">
      LOTP, <a href="" target="_blank"></a> unless otherwise noted.
    </p>
    <div class="text-center">
      Generated by <a href="http://getpelican.com" target="_blank">Pelican</a> with the <a href="http://github.com/nairobilug/pelican-alchemy">alchemy</a> theme.
    </div>
  </div>
</footer> <!-- /.footer -->
  <script src="http://lo-tp.github.io/theme/js/jquery.min.js"></script>
  <script src="http://lo-tp.github.io/theme/js/bootstrap.min.js"></script>
</body> <!-- 42 -->

</html>
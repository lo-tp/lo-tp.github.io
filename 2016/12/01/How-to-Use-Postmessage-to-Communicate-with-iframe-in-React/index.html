<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="React,iframe,postmessage," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="We all know that we should avert the use of iframe, but sometimes, we have no choice but to use it.This article is about how to use postmessage to communicate with an iframe using React.Assumptions we">
<meta name="keywords" content="React,iframe,postmessage">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Use Postmessage to Communicate with iframe in React">
<meta property="og:url" content="http://blog.lotp.xyz/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/index.html">
<meta property="og:site_name" content="Lotp&#39;s Blog">
<meta property="og:description" content="We all know that we should avert the use of iframe, but sometimes, we have no choice but to use it.This article is about how to use postmessage to communicate with an iframe using React.Assumptions we">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://blog.lotp.xyz/images/iframePostmessge.gif">
<meta property="og:updated_time" content="2019-01-20T08:22:52.762Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to Use Postmessage to Communicate with iframe in React">
<meta name="twitter:description" content="We all know that we should avert the use of iframe, but sometimes, we have no choice but to use it.This article is about how to use postmessage to communicate with an iframe using React.Assumptions we">
<meta name="twitter:image" content="http://blog.lotp.xyz/images/iframePostmessge.gif">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://blog.lotp.xyz/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/"/>

  <title> How to Use Postmessage to Communicate with iframe in React | Lotp's Blog </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Lotp's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                How to Use Postmessage to Communicate with iframe in React
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-12-01T06:57:44+08:00" content="2016-12-01">
              2016-12-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>We all know that we should avert the use of iframe, but sometimes, we have no choice but to use it.<br>This article is about how to use postmessage to communicate with an iframe using React.<br>Assumptions were made that you know what is postmessage and how to use it, so if you are not familiar with it, read this this <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="noopener">introduction to postmessage</a> before moving on.<br>At first I want you to know as we need to run js on websites within and outside the child iframe so this method can only be used when you have administration privilege on both sides.</p>
<p>Let’s see what we can do with this method.</p>
<p><img src="/images/iframePostmessge.gif" alt="what we can do"></p>
<p>As you can see, informations about the scrollTop and height of the child iframe is transfered to the parent component so we can tell whether or not the child iframe is scrolled to top or bottom.</p>
<p>To achieve this, we had to run the following javascript inside the website which is shown inside the iframe.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop;</span><br><span class="line">  <span class="keyword">var</span> domain;</span><br><span class="line">  <span class="keyword">var</span> url;</span><br><span class="line">  <span class="keyword">var</span> body;</span><br><span class="line">  <span class="keyword">var</span> target;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sendHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    target.postMessage(&#123; <span class="attr">url</span>: url, <span class="attr">value</span>: body.scrollHeight, <span class="attr">type</span>: <span class="string">'height'</span> &#125;, domain);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sendScrollTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    scrollTop = body.scrollTop;</span><br><span class="line">    target.postMessage(&#123; <span class="attr">url</span>: url, <span class="attr">value</span>: scrollTop, <span class="attr">type</span>: <span class="string">'scrollTop'</span> &#125;, domain);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  body = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'body'</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">receiveMessage</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (event.data.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'setScroll'</span>:</span><br><span class="line">        body.scrollTop = event.data.value;</span><br><span class="line">        scrollTop = event.data.value;</span><br><span class="line">        url = event.data.url;</span><br><span class="line">        target = event.source;</span><br><span class="line">        domain = event.origin;</span><br><span class="line">        sendHeight();</span><br><span class="line">        sendScrollTop();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, receiveMessage);</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.target.activeElement === body &amp;&amp; scrollTop !== body.scrollTop) &#123;</span><br><span class="line">      sendScrollTop();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>Basically, the above code does 3 thing.</p>
<ol>
<li>Set up a handler listening to the incoming message sent from the parent container through postmessage.</li>
<li>Set up a handler listening to the scrolling event and send scrollTop to the parent container at appropriate time.</li>
<li>Send height to the parent container;</li>
</ol>
<p>Now let’s move to the parent side.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; setScrollTop, setHeight &#125; <span class="keyword">from</span> <span class="string">'./action'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">container</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.msgHandler = <span class="keyword">this</span>.msgHandler.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.send = <span class="keyword">this</span>.send.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.componentDidMount = <span class="keyword">this</span>.componentDidMount.bind(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.maxScrollTop = <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  send() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.container &amp;&amp; <span class="keyword">this</span>.container.contentWindow) &#123;</span><br><span class="line">      <span class="keyword">this</span>.container.contentWindow.postMessage(<span class="keyword">this</span>.data, <span class="string">'*'</span>);</span><br><span class="line">      <span class="keyword">this</span>.container.scrollTop = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.received) &#123;</span><br><span class="line">      setTimeout(<span class="keyword">this</span>.send, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="keyword">this</span>.previous = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.next = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>.data = &#123;</span><br><span class="line">      url: <span class="keyword">this</span>.props.content,</span><br><span class="line">      type: <span class="string">'setScroll'</span>,</span><br><span class="line">      value: <span class="keyword">this</span>.props.scrollTop,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">this</span>.send();</span><br><span class="line">    <span class="keyword">this</span>.reveived = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'message'</span>, <span class="keyword">this</span>.msgHandler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  msgHandler(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.data.url !== <span class="keyword">this</span>.props.content) &#123;</span><br><span class="line">      <span class="comment">// console.info(e.data.url);</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (e.data.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'height'</span>:</span><br><span class="line">        <span class="keyword">this</span>.maxScrollTop = e.data.value - <span class="keyword">this</span>.container.offsetHeight;</span><br><span class="line">        <span class="keyword">this</span>.received = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'scrollTop'</span>:</span><br><span class="line">        <span class="keyword">this</span>.props.saveScroll(e.data.value);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        className = <span class="string">'group'</span></span><br><span class="line">      &gt;</span><br><span class="line">        &lt;h4 &gt;</span><br><span class="line">          &#123;<span class="string">`Scroll Top:<span class="subst">$&#123;<span class="keyword">this</span>.props.scrollTop&#125;</span>`</span>&#125;</span><br><span class="line">        &lt;<span class="regexp">/h4&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button</span></span><br><span class="line"><span class="regexp">          onClick = &#123;() =&gt; alert('wanna go to previous page?')&#125;</span></span><br><span class="line"><span class="regexp">          disabled=&#123;this.props.scrollTop !== 0&#125;</span></span><br><span class="line"><span class="regexp">        &gt;</span></span><br><span class="line"><span class="regexp">          Previous</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">        &lt;iframe</span><br><span class="line">          ref = &#123;e =&gt; &#123;</span><br><span class="line">            <span class="keyword">this</span>.container = e;</span><br><span class="line">          &#125;&#125;</span><br><span class="line"></span><br><span class="line">          src = &#123;<span class="keyword">this</span>.props.content&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          disabled=&#123;<span class="keyword">this</span>.props.scrollTop &lt; <span class="keyword">this</span>.maxScrollTop&#125;</span><br><span class="line">            onClick = &#123;() =&gt; alert(<span class="string">'wanna go to next page?'</span>)&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          Next</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">container.propTypes = &#123;</span><br><span class="line">  scrollTop: PropTypes.number.isRequired,</span><br><span class="line">  saveScroll: PropTypes.func.isRequired,</span><br><span class="line">  content: PropTypes.string.isRequired,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">container.mapStateToProps = <span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">  scrollTop: state.scrollTop,</span><br><span class="line">  height: state.height,</span><br><span class="line">  content: <span class="string">'http://localhost:8080/one.html'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">container.mapDispatchToProps = <span class="function"><span class="params">dispatch</span> =&gt;</span> (&#123;</span><br><span class="line">  saveScroll: <span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">    dispatch(setScrollTop(<span class="built_in">Math</span>.round(num)));</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  saveHeight: <span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">    dispatch(setHeight(num));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(container.mapStateToProps,</span><br><span class="line">                       container.mapDispatchToProps,</span><br><span class="line">                       container.mapMergeProps)(container);</span><br></pre></td></tr></table></figure></p>
<p>Firstly, <code>send()</code> is continuously invoked to establish connection with the child iframe in <code>componentDidMount</code> until a reply is recieved.<br>Then monitor the scrollTop and height attribute of the child iframe inside the <code>msgHandler</code>.<br>Having known the scrollTop and height, we can tell if the user scrolls to the top or bottom by comparing those two attributes.</p>
<h3 id="What-is-Missing-in-This-Article"><a href="#What-is-Missing-in-This-Article" class="headerlink" title="What is Missing in This Article?"></a>What is Missing in This Article?</h3><p>For safety reasons, we should always check the origin of messages in both the parent and child sides, but to keep the article short, I ignored this part.<strong>(Never do this in your production environment)</strong></p>
<p>If you want to know more about security measures which we should implement when using postmessage, check out this <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" target="_blank" rel="noopener">document</a>.</p>
<hr>
<p>Full source code were disclosed at this <a href="https://github.com/lo-tp/exampleOfUsingPostmessageInReact" target="_blank" rel="noopener">repo</a>, play with it if you are interested.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/React/" rel="tag">#React</a>
          
            <a href="/tags/iframe/" rel="tag">#iframe</a>
          
            <a href="/tags/postmessage/" rel="tag">#postmessage</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/26/Leetcode-126-Word-Ladder-II/" rel="next" title="[LeetCode 126, TLE] Word Ladder II">
                <i class="fa fa-chevron-left"></i> [LeetCode 126, TLE] Word Ladder II
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/12/10/LeetCode-455-AC-Assign-Cookies/" rel="prev" title="[LeetCode 455, AC] Assign Cookies">
                [LeetCode 455, AC] Assign Cookies <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-overview sidebar-nav-active" data-target="site-overview">
            Overview
          </li>
          <li class="sidebar-nav-toc" data-target="post-toc-wrap" >
            Table of Contents
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/portrait.svg"
               alt="lotp" />
          <p class="site-author-name" itemprop="name">lotp</p>
          <p class="site-description motion-element" itemprop="description">Every Day in Life Is a First Time</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lo-tp" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  Github
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel ">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Missing-in-This-Article"><span class="nav-number">1.</span> <span class="nav-text">What is Missing in This Article?</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lotp</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'blog-lotp-xyz';
      var disqus_identifier = '2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/';
      var disqus_title = "How to Use Postmessage to Communicate with iframe in React";
      var disqus_url = 'http://blog.lotp.xyz/2016/12/01/How-to-Use-Postmessage-to-Communicate-with-iframe-in-React/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

</body>
</html>

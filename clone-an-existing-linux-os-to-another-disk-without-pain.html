<!DOCTYPE html>
<html lang="zh">

<head>
      <meta name="google-site-verification" content="3_Og0vGTM1q3fMJ_WjUj2f4vdqlQpD2TS92MVwmgHzQ" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="http://lo-tp.github.io/clone-an-existing-linux-os-to-another-disk-without-pain.html" />

    <title>  LOTP's Blog &mdash; Clone An Existing Linux OS To Another Disk Without Pain
</title>




    <link rel="stylesheet" href="http://lo-tp.github.io/theme/css/style.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


    <meta name="author" content="Lotp">
    <meta name="description" content="We all know that installing operation system is a toil. So let’s say no to restinalling OS. Recently, I bought a larger SSD and intended to use it to replace the older one. In order to circumvent all the dull jobs I have to do with the reinstalling thing ...">
  <meta name="tags" contents="">
</head>

<body>
<header class="header">
  <div class="container">
      <div class="header-image pull-left">
        <a class="nodec" href="http://lo-tp.github.io"><img src=http://ww3.sinaimg.cn/mw690/005N6Qx8gw1ewt0kld679j305k05kmxk.jpg></a>
      </div>
    <div class="header-inner">
      <h1 class="header-name">
        <a class="nodec" href="http://lo-tp.github.io">LOTP's Blog</a>
      </h1>
      <h3 class="header-text">It's all about Hack, have fun</h3>
      <ul class="header-menu list-inline">
          <li><a class="nodec" href="/tags.html" target="_blank">Tag</a></li>
          <li><a class="nodec" href="/categories.html" target="_blank">Categories</a></li>
      </ul>
    </div>
  </div>
</header> <!-- /.header -->  <div class="container">
  <div class="post full-post">
    <h1 class="post-title">
      <a href="/clone-an-existing-linux-os-to-another-disk-without-pain.html" title="Permalink to Clone An Existing Linux OS To Another Disk Without Pain">Clone An Existing Linux <span class="caps">OS</span> To Another Disk Without&nbsp;Pain</a>
    </h1>
    <ul class="list-inline">
      <li class="post-date">
        Sat 05 December 2015
        <!-- <a class="text-muted" href="/clone-an-existing-linux-os-to-another-disk-without-pain.html" title="2015-12-05T15:26:00+08:00">Sat 05 December 2015</a> -->
      </li>
      <li class="muted">|</li>
      <li class="post-category">
        <a href="http://lo-tp.github.io/category/linux.html">Linux</a>
      </li>
    </ul>
    <div class="post-content">
      <p>We all know that installing operation system is a toil.
<strong>So let&#8217;s say no to restinalling <span class="caps">OS</span>.</strong></p>
<p>Recently, I bought a larger <span class="caps">SSD</span> and intended to use it to replace the older one.
In order to circumvent all the dull jobs I have to do with the reinstalling thing, I decided to clone the existing Ubuntu Mate 14.04 from my older <span class="caps">SSD</span> to the newly bought one.
Luckily I&nbsp;succeeded.</p>
<h3>Caution</h3>
<p>Make sure the space of the destination disk is equal to or larger then the that of the original&nbsp;one.</p>
<h3>Using <code>dd</code> To Clone the&nbsp;Disk</h3>
<p>Plug in the new disk to your computer and check the corressponding files of the&nbsp;disks.</p>
<p>Here in my case, the old disk is <em>/dev/sda</em> and the new disk is <em>/dev/sdb</em>.
Run the following command to fully copy the content(Please pay extra attention when using&nbsp;dd).</p>
<p><code>dd if=/dev/sda of=/dev/sdb</code>.</p>
<h3>Change <span class="caps">UUID</span></h3>
<p>Using <code>dd</code>, the <span class="caps">UUID</span> partitions on the two disks will be the&nbsp;same.</p>
<p>This may lead to some conflict, so we have to change the <span class="caps">UUID</span> of the partitions on the new&nbsp;disk.</p>
<p>In my case, I got two new partitions: sdb1 and&nbsp;sdb2.</p>
<p>And I change <span class="caps">UUID</span> using this&nbsp;command:</p>
<p><code>tune2fs /dev/sdbX -U `uuidgen`</code>.</p>
<p>Now shutdown your <span class="caps">PC</span>, install the new disk to the port of the older one and restart your <span class="caps">PC</span> to enjoy your new&nbsp;disk.</p>
<h3>Extend the Partition and File System of the New&nbsp;Disk</h3>
<p>With <code>dd</code>, you get an exact copy of your older disk. That is to say, the space of the partition on the new disk is also the same as the older&nbsp;one.</p>
<p>You know in most circumstances, we would buy a largger disk to replace the older one and then some of the space in the new disk could not be used(The partition of the older disk didn&#8217;t fully fill the whole disk&nbsp;space).</p>
<p>Fortunately, we could work around this&nbsp;problem.</p>
<p>Boot your <span class="caps">PC</span> from the older disk with the new one also on your&nbsp;machine.</p>
<ol>
<li>Use <code>fdisk</code> to remove the&nbsp;partition.</li>
<li>Use <code>fdisk</code> to recreate the partition with the desirable size(Be careful here to make sure that the <strong>First sector</strong> is the same as that of the removed&nbsp;partition).</li>
<li>Use <code>fsck</code> to check everything you&#8217;ve done to your partition is&nbsp;ok.</li>
<li>Use <code>resize2fs</code> to resize the file&nbsp;system.</li>
</ol>
<p>If you need furture help about how to extend, check <a href="https://geekpeek.net/resize-filesystem-fdisk-resize2fs/">this post</a>.</p>
<h3>Repair&nbsp;Grub</h3>
<p>If your plan is to use the new disk in a port different to the original one, then there will be some more work to&nbsp;do.</p>
<p>As I&#8217;ve mention before, <code>dd</code> copys every thing from the original disk to the new one exactly. 
The boot files is of no exception.
So if you boot your <span class="caps">PC</span> with the disk installed on a different port, then you <span class="caps">PC</span> would still boot from your original&nbsp;disk.</p>
<p>To solve this problem, you&#8217;ll have to repair your boot file.
Some kind people have already make some thing called <em>boot-repair</em>.</p>
<p>All you have to do is to download the <a href="http://sourceforge.net/projects/boot-repair-cd/">image</a> of <em>boot-repair</em> and burn the image to a usb stick to make a bootable usb disk&nbsp;.</p>
<p>Boot your computer from the newly created usb disk and a wizard like this would&nbsp;appear.</p>
<p><img alt="wizard" src="http://ww4.sinaimg.cn/mw690/005N6Qx8gw1eyovjprve4j31050kqgth.jpg" /></p>
<p>Choose recommended repair and wait for a while.
After a quick reboot, your computer would be ready to use with the new disk properly&nbsp;configured.</p>
    </div>
  </div>
  <hr class="separator">
  <div class="col-md-8 col-md-offset-2">
  </div>
  </div>
<footer class="footer">
  <div class="container">
    <p class="text-center">
      LOTP, <a href="" target="_blank"></a> unless otherwise noted.
    </p>
    <div class="text-center">
      Generated by <a href="http://getpelican.com" target="_blank">Pelican</a> with the <a href="http://github.com/nairobilug/pelican-alchemy">alchemy</a> theme.
    </div>
  </div>
</footer> <!-- /.footer -->
  <script src="http://lo-tp.github.io/theme/js/jquery.min.js"></script>
  <script src="http://lo-tp.github.io/theme/js/bootstrap.min.js"></script>
</body> <!-- 42 -->

</html>